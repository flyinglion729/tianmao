$(function(){var n=$(".shopping_left_bottom").children().children(),s=$(".shopping_left_top").children(),i=$(".shopping_big").children().children(),h=0;n.on("mouseenter",function(){h=$(this).index(),$(this).css({border:"2px solid #000000"}).siblings().css({border:"2px solid transparent"}),s.eq(h).css({zIndex:10}).siblings("img").css({zIndex:1}),i.eq(h).css({display:"block"}).siblings().css({display:"none"})});var p=$(".shopping_left_top"),d=$(".block"),a=$(".shopping_big"),g=$(".shopping_big").children().children().children();p.on("mouseenter",function(n){d.css({display:"block"}),a.css({display:"block"}),$(document).on("mousemove",function(n){var s=n.pageX-p.offset().left,i=n.pageY-p.offset().top,o=s-d.outerWidth()/2,e=i-d.outerHeight()/2,t=p.innerWidth()-d.outerWidth(),r=p.innerHeight()-d.outerHeight();o<=0&&(o=0),t<=o&&(o=t),e<=0&&(e=0),r<=e&&(e=r),d.css({left:o,top:e});var l=-o*a.innerWidth()/d.innerWidth(),c=-e*a.innerHeight()/d.innerHeight();g.eq(h).css({left:l,top:c})})}),p.on("mouseleave",function(){d.css({display:"none"}),a.css({display:"none"}),$(document).off("mousemove")});var o=[],e={},t=$(".num_top").children("strong"),r=!0,l=$(".strong_men").children();t.on("click",function(){r?($(this).css({border:"2px solid #ff0036"}),r=!1,e.color="black"):($(this).css({border:"2px solid transparent"}),r=!0,e.color="")});for(var c=0;c<9;c++)l.eq(c)[0].index=!0;l.on("click",function(){if($(this)[0].index){$(this).css({border:"2px solid #ff0036"}).siblings().css({border:"2px solid transparent"}),$(this)[0].index=!1;for(var n=0;n<$(this).siblings().length;n++)$(this).siblings().eq(n)[0].index=!0;e.shoe=$(this).html()}else $(this).css({border:"2px solid transparent"}),$(this)[0].index=!0,e.shoe=""});var f=1;e.shoeNum=f,$(".litTop").on("click",function(){74<=++f&&(f=74),$(".bot_men").children("strong").html(f),e.shoeNum=f}),$(".litDown").on("click",function(){--f<=1&&(f=1),$(".bot_men").children("strong").html(f),e.shoeNum=f}),console.log(111),$(".btn_car").on("click",function(){var s=$.extend({},e);!function(){if(""!=e.color&&""!=e.shoe)if(0==o.length)o.push(s);else{for(var n=0;n<o.length;n++)if(o[n].shoe==s.shoe)return o[n].shoeNum++;o.push(s)}}(),localStorage.car=JSON.stringify(o);var n,i=JSON.parse(localStorage.car);n=i,$(".shopping_list").html(""),$.each(n,function(n,s){var i=$("<li></li>");i.html("颜色:"+s.color+"---码数:"+s.shoe+"---"+s.shoeNum+"双---------<span>删除</span>"),$(".shopping_list").append(i[0]);var o=$(".shopping_list").children().length;$(".shopping_list").css({bottom:50*o})}),$(".shopping_list").children().on("click","span",function(){$(this).parent().remove();$(".shopping_list").children()})})});